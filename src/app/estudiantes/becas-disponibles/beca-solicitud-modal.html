<div *ngIf="isOpen" class="modal-solicitud modal-overlay" (click)="closeModalHandler()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Solicitar Beca</h2>
      <button class="close-btn" aria-label="Cerrar modal" (click)="closeModalHandler()">
        <i class="material-icons">close</i>
      </button>
    </div>

    <div class="modal-body" *ngIf="beca">
      <div class="beca-info">
        <h3>{{ beca.nombre }}</h3>
        <p><strong>Descripción:</strong> {{ beca.descripcion }}</p>
        <p><strong>Cobertura:</strong> {{ beca.cobertura }}%</p>
        <p><strong>Fecha límite:</strong> {{ beca.fechaLimite }}</p>
        <p><strong>Valor:</strong> {{ beca.valor }}</p>
      </div>

      <div class="formulario-solicitud">
        <h4>Datos de solicitud</h4>
        <form (ngSubmit)="onSubmit()" #solicitudForm="ngForm">
          <!-- Campos ocultos -->
          <input type="hidden" [(ngModel)]="solicitudFormModel.estudianteId" name="estudianteId" [ngModelOptions]="{ standalone: true }" />
          <input type="hidden" [(ngModel)]="solicitudFormModel.tipoBecaId" name="tipoBecaId" [ngModelOptions]="{ standalone: true }" />

          <div class="form-group">
            <label>Estado</label>
            <input type="text" value="Pendiente" readonly />
          </div>

          <div class="form-group">
            <label>Fecha de Solicitud</label>
            <input
              type="date"
              [(ngModel)]="solicitudFormModel.fechaSolicitud"
              name="fechaSolicitud"
              [ngModelOptions]="{ standalone: true }"
              required
            />
          </div>

          <div class="form-group">
            <label>Período Académico *</label>
            <select
              [(ngModel)]="solicitudFormModel.periodoAcademicoId"
              name="periodoAcademicoId"
              [ngModelOptions]="{ standalone: true }"
              required
            >
              <option value="">Seleccione un período</option>
              <option *ngFor="let periodo of periodosAcademicos" [value]="periodo.id">
                {{ periodo.nombre }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label>Observaciones</label>
            <textarea
              [(ngModel)]="solicitudFormModel.observaciones"
              name="observaciones"
              [ngModelOptions]="{ standalone: true }"
              placeholder="Observaciones adicionales"
            ></textarea>
          </div>

          <div class="form-actions">
            <button type="button" class="btn-cancelar" (click)="closeModalHandler()">Cancelar</button>
            <button type="submit" class="btn-solicitar" [disabled]="!solicitudForm.valid">Enviar Solicitud</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>