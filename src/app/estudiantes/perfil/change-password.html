<div class="change-password-container">
  <h2>Cambiar contraseña</h2>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <label for="currentPassword">Contraseña actual</label>
    <input
      id="currentPassword"
      type="password"
      formControlName="currentPassword"
      [class.invalid]="form.controls['currentPassword'].invalid && form.controls['currentPassword'].touched"
    />
    <div *ngIf="form.controls['currentPassword'].invalid && form.controls['currentPassword'].touched" class="error">
      La contraseña actual es requerida.
    </div>

    <label for="newPassword">Nueva contraseña</label>
    <input
      id="newPassword"
      type="password"
      formControlName="newPassword"
      [class.invalid]="form.controls['newPassword'].invalid && form.controls['newPassword'].touched"
    />
    <div *ngIf="form.controls['newPassword'].errors?.['required'] && form.controls['newPassword'].touched" class="error">
      La nueva contraseña es requerida.
    </div>
    <div *ngIf="form.controls['newPassword'].errors?.['minlength'] && form.controls['newPassword'].touched" class="error">
      La nueva contraseña debe tener al menos 6 caracteres.
    </div>

    <label for="confirmNewPassword">Confirmar nueva contraseña</label>
    <input
      id="confirmNewPassword"
      type="password"
      formControlName="confirmNewPassword"
      [class.invalid]="
        (form.hasError('notMatching') && form.controls['confirmNewPassword'].touched)
      "
    />
    <div *ngIf="form.hasError('notMatching') && form.controls['confirmNewPassword'].touched" class="error">
      Las contraseñas no coinciden.
    </div>

    <button type="submit" [disabled]="loading">Cambiar contraseña</button>
  </form>

  <div *ngIf="error" class="error-message">{{ error }}</div>
  <div *ngIf="success" class="success-message">{{ success }}</div>
</div>
