<!-- src/app/auth/login/login.html -->
<div class="login-container" [ngClass]="{'admin': isAdmin}">
  <div class="login-card">
    <!-- Pestañas para seleccionar rol -->
    <div class="tabs">
      <button
        class="tab-button"
        [ngClass]="{'active': !isAdmin}"
        (click)="setRole('estudiante')"
      >
        <i class="material-icons">school</i> Estudiante
      </button>
      <button
        class="tab-button"
        [ngClass]="{'active': isAdmin}"
        (click)="setRole('admin')"
      >
        <i class="material-icons">admin_panel_settings</i> Administrador
      </button>
    </div>

    <!-- Logo -->
    <div class="logo">
      <div class="logo-icon" [ngClass]="{'admin': isAdmin}">
        <i class="material-icons">{{ isAdmin ? 'admin_panel_settings' : 'school' }}</i>
      </div>
    </div>

    <!-- Título y subtítulo -->
    <div class="title">Iniciar Sesión</div>
    <div class="subtitle">Ingresa tus credenciales para acceder al sistema</div>

    <!-- Formulario -->
    <form class="form" (ngSubmit)="login(loginForm)" #loginForm="ngForm">
      <!-- Campo de correo -->
      <div class="input-group">
        <label for="correo">Correo Electrónico</label>
        <div class="input-field">
          <i class="material-icons left">email</i>
          <input
            id="correo"
            type="email"
            [(ngModel)]="correo"
            name="correo"
            required
            #correoInput="ngModel"
            placeholder="Ingresa tu correo"
          />
        </div>
        <div
          *ngIf="correoInput.invalid && correoInput.touched"
          class="error-message"
        >
          Correo es requerido
        </div>
      </div>

      <!-- Campo de contraseña -->
      <div class="input-group">
        <label for="password">Contraseña</label>
        <div class="input-field">
          <i class="material-icons left">lock</i>
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="password"
            name="password"
            required
            #passwordInput="ngModel"
            placeholder="Ingresa tu contraseña"
          />
          <i
            class="material-icons eye"
            (click)="togglePasswordVisibility()"
          >
            {{ showPassword ? 'visibility_off' : 'visibility' }}
          </i>
        </div>
        <div
          *ngIf="passwordInput.invalid && passwordInput.touched"
          class="error-message"
        >
          Contraseña es requerida
        </div>
      </div>

      <!-- Mensaje de error general -->
      <div *ngIf="error" class="error-message">{{ error }}</div>

      <!-- Botón de envío -->
      <button
        type="submit"
        class="submit-button"
        [ngClass]="{'btn-student': !isAdmin, 'btn-admin': isAdmin}"
        [disabled]="loading || loginForm.invalid"
      >
        <span *ngIf="loading" class="spinner"></span>
        {{ loading ? 'Iniciando...' : 'Iniciar Sesión' }}
      </button>
    </form>

    <!-- Enlaces -->
    <div class="links">
      <a href="/forgot-password" class="forgot">¿Olvidaste tu contraseña?</a>
      <div class="register">
        ¿No tienes cuenta?
        <a href="/register" class="register-link">Regístrate</a>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer-text">Sistema de Gestión de Becas - Universidad</div>
  </div>
</div>